-- Tabela Escritor
CREATE TABLE Escritor (
    codEscritor INT PRIMARY KEY,
    nomeCompleto VARCHAR(100) NOT NULL,
    paisOrigem VARCHAR(50)
);

-- Tabela Usuario (Leitor)
CREATE TABLE Usuario (
    codUsuario INT PRIMARY KEY,
    nomeUsuario VARCHAR(100) NOT NULL,
    contatoEmail VARCHAR(100) UNIQUE,
    contatoFone VARCHAR(20)
);

-- Tabela Publicacao
CREATE TABLE Publicacao (
    codPublicacao INT PRIMARY KEY,
    nomeObra VARCHAR(150) NOT NULL,
    anoLancamento INT,
    codigoISBN VARCHAR(20) UNIQUE
);

-- Tabela Locacao
CREATE TABLE Locacao (
    codLocacao INT PRIMARY KEY,
    dataRetirada DATE NOT NULL,
    dataEntrega DATE,
    codUsuario INT,
    FOREIGN KEY (codUsuario) REFERENCES Usuario(codUsuario)
);

-- Tabela associativa Publicacao/Escritor (N:N)
CREATE TABLE ObraEscritor (
    codPublicacao INT,
    codEscritor INT,
    PRIMARY KEY (codPublicacao, codEscritor),
    FOREIGN KEY (codPublicacao) REFERENCES Publicacao(codPublicacao),
    FOREIGN KEY (codEscritor) REFERENCES Escritor(codEscritor)
);

-- Tabela associativa Locacao/Publicacao (N:N)
CREATE TABLE LocacaoObra (
    codLocacao INT,
    codPublicacao INT,
    PRIMARY KEY (codLocacao, codPublicacao),
    FOREIGN KEY (codLocacao) REFERENCES Locacao(codLocacao),
    FOREIGN KEY (codPublicacao) REFERENCES Publicacao(codPublicacao)
);
